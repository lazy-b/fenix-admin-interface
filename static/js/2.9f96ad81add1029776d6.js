webpackJsonp([2],{"0Yd4":function(e,t,a){"use strict";var r=a("4YfN"),o=a.n(r),s=a("IHPB"),n=a.n(s),l=a("8ZxV"),i=a("QUe6");t.a={data:function(){return{dialogTitle:"订单进度编辑",visible:!1,form:{id:"",orderInformationId:"",orderNo:"",productName:"",scheduleInfo:[{name:"回交期",planDate:null,factDate:null,remarks:""},{name:"领料",planDate:null,factDate:null,remarks:""},{name:"排计划",planDate:null,factDate:null,remarks:""},{name:"生产",planDate:null,factDate:null,remarks:""},{name:"交货",planDate:null,factDate:null,remarks:""}]},rules:{},pickerOptions:{shortcuts:[{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"明天",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}},{text:"一周后",onClick:function(e){var t=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",t)}}]}}},computed:{dialogVisible:function(){return this.$store.getters.scheduleDialogVisible},defaultInfo:function(){return this.$store.getters.scheduleEditDefault}},watch:{dialogVisible:{handler:function(e,t){this.visible!==e&&(this.visible=e)},immediate:!0},defaultInfo:{handler:function(e,t){e&&(this.form.id=e.id,this.form.orderNo=e.orderNo,this.form.productName=e.productName,this.form.orderInformationId=e.orderInformationId,this.form.scheduleInfo=[].concat(n()(e.scheduleInfo)))}}},methods:{cancelEdit:function(){this.$store.dispatch("schedule/closeEditDialog")},dialogClose:function(){this.$store.dispatch("schedule/closeEditDialog")},confirmEdit:function(){var e=this,t=new FormData(this.$refs.form);Object(i.c)(t,{}).then(function(t){e.$store.dispatch("schedule/updateInfo",o()({},e.form)),e.$store.dispatch("schedule/closeEditDialog"),e.$message({type:"success",message:"修改数据成功！！！"})},function(t){e.$notify({type:"error",message:"修改数据失败，请重试！！！"}),console.log("后台返回数据有误！")})}},mounted:function(){this.$nextTick(function(){this.rules=l.a}),window.test=this}}},"3DFs":function(e,t,a){"use strict";function r(e){a("zYu4")}var o=a("0Yd4"),s=a("sAAw"),n=a("46Yf"),l=r,i=n(o.a,s.a,!1,l,"data-v-05566e32",null);t.a=i.exports},"7E8L":function(e,t,a){"use strict";var r=a("hhm8"),o=a("QUe6");t.a={data:function(){return{searchForm:{isSearch:!1,valueType:"orderNo",valueTypeArr:[{value:"orderNo",label:"订单号"},{value:"productName",label:"产品名称"}],value:"",searchValue:""}}},computed:{showInfos:function(){return this.$store.getters.scheduleSourceData.map(function(e){var t=r.a.getState(e.scheduleInfo);return{id:e.id,orderInformationId:e.orderInformationId,orderNo:e.orderNo,productName:e.productName,state:t.state,name:t.name,planDate:r.a.formatDate(t.planDate,["年","月","日"]),factDate:r.a.formatDate(t.factDate,["年","月","日"]),remarks:t.remarks}})},stateFilters:function(){var e=this.$store.getters.selectionGetSelections(["state"]).state,t=[];return e&&e.map&&(t=e.map(function(e){return{text:e,value:e}})),t},canEdit:function(){return!0}},methods:{getSourceDate:function(){var e=this;return Object(o.b)().then(function(t){var a=t.data.scheduleInfos;a.length?e.$store.dispatch("schedule/setSourceData",a):e.$notify({type:"error",message:"后台返回数据出错，请联系管理员"})},function(e){console.log("后台返回数据有误！")})},setFilterList:function(){var e={data:this.showInfos,keys:["state"]};this.$store.dispatch("selections/addSelections",e)},stateFilter:function(e,t){return t.state===e},stateColor:function(e){var t=["未处理","沟通交期","开始领料","安排计划","开始生产","开始交货"];return"hsl(120, "+t.indexOf(e)/(t.length-1)*100+"%, 50%)"},handleEdit:function(e,t){this.$store.dispatch("schedule/openEditDialog",e)},showDetail:function(e,t){var a=this,r={orderId:t.orderInformationId};this.$store.dispatch("schedule/getOrderInfos",r).then(function(e){},function(e){a.$notify({type:"error",message:"请求详情失败，请重试或者联系管理员..."})});var o={name:"scheduleSearch"};this.$router.push(o)}},mounted:function(){this.$nextTick(function(){var e=this;this.getSourceDate().then(function(){e.setFilterList()})})}}},"8ZxV":function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r={name:[],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}},LCyD:function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,"fieldset[data-v-05566e32]{border:1px dotted #ccc}","",{version:3,sources:["F:/demo/vueDemo/vue-element/src/components/main/views/schedule/overview/OverviewEdit.vue"],names:[],mappings:"AACA,0BACE,sBAAwB,CACzB",file:"OverviewEdit.vue",sourcesContent:["\nfieldset[data-v-05566e32] {\r\n  border: 1px dotted #ccc;\n}\r\n"],sourceRoot:""}])},LSpQ:function(e,t,a){"use strict";function r(e){a("odmn")}var o=a("7E8L"),s=a("OhEU"),n=a("46Yf"),l=r,i=n(o.a,s.a,!1,l,"data-v-dcb1acb6",null);t.a=i.exports},OhEU:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fenix-schedule-info"},[a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请先选择搜索类型"},model:{value:e.searchForm.value,callback:function(t){e.$set(e.searchForm,"value",t)},expression:"searchForm.value"}},[a("el-select",{staticClass:"my-select-type",attrs:{slot:"prepend",placeholder:"请先选择搜索类型"},slot:"prepend",model:{value:e.searchForm.valueType,callback:function(t){e.$set(e.searchForm,"valueType",t)},expression:"searchForm.valueType"}},e._l(e.searchForm.valueTypeArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.showInfos,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单号",sortable:"",prop:"orderNo",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"产品名称",sortable:"",prop:"productName",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"当前状态",prop:"state",filters:e.stateFilters,"filter-method":e.stateFilter,width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("计划"+e._s(t.row.name)+"时间: "+e._s(t.row.planDate))]),e._v(" "),a("p",[e._v("实际"+e._s(t.row.name)+"时间: "+e._s(t.row.factDate))]),e._v(" "),a("p",[e._v("备注: "+e._s(t.row.remarks))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{"close-transition":"",color:e.stateColor(t.row.state),size:"medium"}},[e._v("\n              "+e._s(t.row.state)+"\n            ")])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.canEdit?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){e.showDetail(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)},o=[],s={render:r,staticRenderFns:o};t.a=s},"P9z/":function(e,t,a){"use strict";var r=a("LSpQ"),o=a("3DFs");t.a={components:{"my-overview-show":r.a,"my-overview-edit":o.a},data:function(){return{}},computed:{},methods:{}}},PQyE:function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Overview.vue",sourceRoot:""}])},T0M2:function(e,t,a){var r=a("PQyE");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("780da825",r,!0)},hhm8:function(e,t,a){"use strict";t.a={unique:function(e){var t=[],a={},r=e.length,o=void 0,s=void 0;for(o=0;o<r;o++)s=e[o],a[s]||(t.push(s),a[s]=!0);return t},getFilters:function(e,t){var a={},r={};return e&&e.length&&t&&t.length&&e.foreach(function(e){t.foreach(function(t){a[t]||(a[t]={},r[t]=[]),a[t][e[t]]||(a[t][e[t]]=!0,r[t].push(e[t]))})}),r},getState:function(e){var t={state:"未处理",name:"处理订单",planDate:new Date,factDate:null,remarks:"订单已接收，但还未进行处理！！"},a={state:"",name:"",planDate:null,factDate:null,remarks:""};switch(!0){case!!e[4].factDate:a={state:"开始交货",name:e[4].name,planDate:e[4].planDate,factDate:e[4].factDate,remarks:e[4].remarks};break;case!!e[3].factDate:a={state:"开始生产",name:e[3].name,planDate:e[3].planDate,factDate:e[3].factDate,remarks:e[3].remarks};break;case!!e[2].factDate:a={state:"安排计划",name:e[2].name,planDate:e[2].planDate,factDate:e[2].factDate,remarks:e[2].remarks};break;case!!e[1].factDate:a={state:"开始领料",name:e[1].name,planDate:e[1].planDate,factDate:e[1].factDate,remarks:e[1].remarks};break;case!!e[0].factDate:a={state:"沟通交期",name:e[0].name,planDate:e[0].planDate,factDate:e[0].factDate,remarks:e[0].remarks};break;default:a=t}return a},formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["-","-",""],a="";if(e){var r=new Date(e);a=r.getFullYear()+t[0]+(r.getMonth()+1)+t[1]+r.getDate()+t[2]}return a},classof:function(e){return null===e?"null":void 0===e?"undefined":Object.prototype.toString.call(e).slice(8,-1)},deepClone:function(e){var t=this.classof(e),a=void 0;if("Object"===t)a={};else{if("Array"!==t)return e;a=[]}for(var r in e){var o=e[r];"Object"===this.classof(o)?a[r]=this.deepClone(o):"Array"===this.classof(o)?a[r]=this.deepClone(o):a[r]=e[r]}return a}}},hs09:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fenix-overview"},[a("my-overview-show"),e._v(" "),a("my-overview-edit")],1)},o=[],s={render:r,staticRenderFns:o};t.a=s},odmn:function(e,t,a){var r=a("x2G5");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("402b3b4f",r,!0)},sAAw:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dialogTitle,center:"","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.visible},on:{close:e.dialogClose,"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"140px"}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{model:{value:e.form.productName,callback:function(t){e.$set(e.form,"productName",t)},expression:"form.productName"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("回交期")]),e._v(" "),a("el-form-item",{attrs:{label:"计划开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[0].planDate,callback:function(t){e.$set(e.form.scheduleInfo[0],"planDate",t)},expression:"form.scheduleInfo[0].planDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[0].factDate,callback:function(t){e.$set(e.form.scheduleInfo[0],"factDate",t)},expression:"form.scheduleInfo[0].factDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注说明"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.scheduleInfo[0].remarks,callback:function(t){e.$set(e.form.scheduleInfo[0],"remarks",t)},expression:"form.scheduleInfo[0].remarks"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("领料")]),e._v(" "),a("el-form-item",{attrs:{label:"计划开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[1].planDate,callback:function(t){e.$set(e.form.scheduleInfo[1],"planDate",t)},expression:"form.scheduleInfo[1].planDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[1].factDate,callback:function(t){e.$set(e.form.scheduleInfo[1],"factDate",t)},expression:"form.scheduleInfo[1].factDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注说明"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.scheduleInfo[1].remarks,callback:function(t){e.$set(e.form.scheduleInfo[1],"remarks",t)},expression:"form.scheduleInfo[1].remarks"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("排计划")]),e._v(" "),a("el-form-item",{attrs:{label:"计划开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[2].planDate,callback:function(t){e.$set(e.form.scheduleInfo[2],"planDate",t)},expression:"form.scheduleInfo[2].planDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[2].factDate,callback:function(t){e.$set(e.form.scheduleInfo[2],"factDate",t)},expression:"form.scheduleInfo[2].factDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注说明"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.scheduleInfo[2].remarks,callback:function(t){e.$set(e.form.scheduleInfo[2],"remarks",t)},expression:"form.scheduleInfo[2].remarks"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("生产")]),e._v(" "),a("el-form-item",{attrs:{label:"计划开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[3].planDate,callback:function(t){e.$set(e.form.scheduleInfo[3],"planDate",t)},expression:"form.scheduleInfo[3].planDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[3].factDate,callback:function(t){e.$set(e.form.scheduleInfo[3],"factDate",t)},expression:"form.scheduleInfo[3].factDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注说明"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.scheduleInfo[3].remarks,callback:function(t){e.$set(e.form.scheduleInfo[3],"remarks",t)},expression:"form.scheduleInfo[3].remarks"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("交货")]),e._v(" "),a("el-form-item",{attrs:{label:"计划开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[4].planDate,callback:function(t){e.$set(e.form.scheduleInfo[4],"planDate",t)},expression:"form.scheduleInfo[4].planDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions},model:{value:e.form.scheduleInfo[4].factDate,callback:function(t){e.$set(e.form.scheduleInfo[4],"factDate",t)},expression:"form.scheduleInfo[4].factDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注说明"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.scheduleInfo[4].remarks,callback:function(t){e.$set(e.form.scheduleInfo[4],"remarks",t)},expression:"form.scheduleInfo[4].remarks"}})],1)],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirmEdit}},[e._v("确认修改")]),e._v(" "),a("el-button",{on:{click:e.cancelEdit}},[e._v("取消修改")])],1)],1)},o=[],s={render:r,staticRenderFns:o};t.a=s},tVWc:function(e,t,a){"use strict";function r(e){a("T0M2")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("P9z/"),s=a("hs09"),n=a("46Yf"),l=r,i=n(o.a,s.a,!1,l,"data-v-6f6ba210",null);t.default=i.exports},x2G5:function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,".fenix-schedule-info .el-tag[data-v-dcb1acb6]{color:#fff}","",{version:3,sources:["F:/demo/vueDemo/vue-element/src/components/main/views/schedule/overview/OverviewShow.vue"],names:[],mappings:"AACA,8CACE,UAAY,CACb",file:"OverviewShow.vue",sourcesContent:["\n.fenix-schedule-info .el-tag[data-v-dcb1acb6] {\n  color: #fff;\n}\n"],sourceRoot:""}])},zYu4:function(e,t,a){var r=a("LCyD");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("3d6cfe5c",r,!0)}});
//# sourceMappingURL=2.9f96ad81add1029776d6.js.map